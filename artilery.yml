config:
  target: "http://localhost:3000"
  phases:
    - duration: 3
      arrivalRate: 60
      name: Warm up
    - duration: 30
      arrivalRate: 40
      rampTo: 40
      name: Ramp up load
    - duration: 30
      arrivalRate: 5
      name: Sustained load
scenarios:
  - name: "Get bugs"
    flow:
      - get:
          url: "/bugs"
  - name: "Get bugs"
    flow:
      - get:
          url: "/bugs/36"
  - name: "Add bugs"
    flow:
    - post:
          url: "/users/login"
          json:
            email: "josh@gmail.com"
            password: "okayfine"
          headers:
          Content-Type: "application/json"
          capture:
            json: "$.data.token"
            as: "token"

    - post:
          url: "/bugs/add"
          json:
            bug_title: "redis server"
            bug_status: "New"
            bug_priority: "high"
            added_by: 1
  - name: "update bugs"
    flow:
      - post:
          url: "/users/login"
          json:
            email: "josh@gmail.com"
            password: "okayfine"
          headers:
          Content-Type: "application/json"
          capture:
            json: "$.data.token"
            as: "token"
      - put:
          url: "/bugs/update/15"
          headers:
            Authorization: 'Bearer {{ token }}'
          json:
            bug_title: "redis server"
            bug_status: "New"
            bug_priority: "high"
            added_by: 1
 
